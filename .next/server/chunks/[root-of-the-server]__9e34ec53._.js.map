{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/steve/Repositories/workflow/src/app/api/config/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { writeFile, readFile, mkdir } from 'node:fs/promises';\r\nimport { join } from 'node:path';\r\nimport { existsSync } from 'node:fs';\r\n\r\nconst CONFIG_DIR = join(process.cwd(), '.config');\r\nconst CONFIG_FILE = join(CONFIG_DIR, 'environment.json');\r\n\r\ninterface EnvironmentConfig {\r\n  GITLAB_URL: string;\r\n  GITLAB_TOKEN: string;\r\n  CLAUDE_API_KEY: string;\r\n  CLAUDE_CODE_PATH: string;\r\n  MAX_WORKSPACE_SIZE_MB: string;\r\n  CACHE_EXPIRY_DAYS: string;\r\n  TEMP_DIR_PREFIX: string;\r\n  LOG_LEVEL: string;\r\n  ALLOWED_GITLAB_HOSTS: string;\r\n  MAX_CONCURRENT_WORKSPACES: string;\r\n}\r\n\r\nconst DEFAULT_CONFIG: EnvironmentConfig = {\r\n  GITLAB_URL: 'https://gitlab.com',\r\n  GITLAB_TOKEN: '',\r\n  CLAUDE_API_KEY: '',\r\n  CLAUDE_CODE_PATH: '/usr/local/bin/claude-code',\r\n  MAX_WORKSPACE_SIZE_MB: '1000',\r\n  CACHE_EXPIRY_DAYS: '7',\r\n  TEMP_DIR_PREFIX: 'gitlab-claude-',\r\n  LOG_LEVEL: 'info',\r\n  ALLOWED_GITLAB_HOSTS: 'gitlab.com,your-internal-gitlab.com',\r\n  MAX_CONCURRENT_WORKSPACES: '5'\r\n};\r\n\r\nexport async function GET() {\r\n  try {\r\n    let config = DEFAULT_CONFIG;\r\n    \r\n    if (existsSync(CONFIG_FILE)) {\r\n      const fileContent = await readFile(CONFIG_FILE, 'utf-8');\r\n      const savedConfig = JSON.parse(fileContent);\r\n      config = { ...DEFAULT_CONFIG, ...savedConfig };\r\n    }\r\n    \r\n    return NextResponse.json({\r\n      success: true,\r\n      config\r\n    });\r\n  } catch (error) {\r\n    console.error('Error loading config:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to load configuration', details: error instanceof Error ? error.message : String(error) },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const { config } = await request.json();\r\n    \r\n    if (!config) {\r\n      return NextResponse.json(\r\n        { error: 'Configuration data is required' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n    \r\n    // Ensure config directory exists\r\n    if (!existsSync(CONFIG_DIR)) {\r\n      await mkdir(CONFIG_DIR, { recursive: true });\r\n    }\r\n    \r\n    // Save configuration to file\r\n    await writeFile(CONFIG_FILE, JSON.stringify(config, null, 2), 'utf-8');\r\n    \r\n    return NextResponse.json({\r\n      success: true,\r\n      message: 'Configuration saved successfully'\r\n    });\r\n  } catch (error) {\r\n    console.error('Error saving config:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to save configuration', details: error instanceof Error ? error.message : String(error) },\r\n      { status: 500 }\r\n    );\r\n  }\r\n} "],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEA,MAAM,aAAa,CAAA,GAAA,iHAAA,CAAA,OAAI,AAAD,EAAE,QAAQ,GAAG,IAAI;AACvC,MAAM,cAAc,CAAA,GAAA,iHAAA,CAAA,OAAI,AAAD,EAAE,YAAY;AAerC,MAAM,iBAAoC;IACxC,YAAY;IACZ,cAAc;IACd,gBAAgB;IAChB,kBAAkB;IAClB,uBAAuB;IACvB,mBAAmB;IACnB,iBAAiB;IACjB,WAAW;IACX,sBAAsB;IACtB,2BAA2B;AAC7B;AAEO,eAAe;IACpB,IAAI;QACF,IAAI,SAAS;QAEb,IAAI,CAAA,GAAA,6GAAA,CAAA,aAAU,AAAD,EAAE,cAAc;YAC3B,MAAM,cAAc,MAAM,CAAA,GAAA,qIAAA,CAAA,WAAQ,AAAD,EAAE,aAAa;YAChD,MAAM,cAAc,KAAK,KAAK,CAAC;YAC/B,SAAS;gBAAE,GAAG,cAAc;gBAAE,GAAG,WAAW;YAAC;QAC/C;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAAgC,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG,OAAO;QAAO,GACzG;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,QAAQ,IAAI;QAErC,IAAI,CAAC,QAAQ;YACX,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAiC,GAC1C;gBAAE,QAAQ;YAAI;QAElB;QAEA,iCAAiC;QACjC,IAAI,CAAC,CAAA,GAAA,6GAAA,CAAA,aAAU,AAAD,EAAE,aAAa;YAC3B,MAAM,CAAA,GAAA,qIAAA,CAAA,QAAK,AAAD,EAAE,YAAY;gBAAE,WAAW;YAAK;QAC5C;QAEA,6BAA6B;QAC7B,MAAM,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD,EAAE,aAAa,KAAK,SAAS,CAAC,QAAQ,MAAM,IAAI;QAE9D,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAAgC,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG,OAAO;QAAO,GACzG;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}