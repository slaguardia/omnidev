# Environment configuration for GitLab Claude Manager
#
# Usage:
#   cp env.example .env
#
# Notes:
# - Never commit your real `.env` (it should stay local).
# - See docs/ENVIRONMENT.md for detailed documentation.

# =============================================================================
# REQUIRED FOR ALL DEPLOYMENTS
# =============================================================================

# The canonical URL of your app (no trailing slash)
NEXTAUTH_URL=http://localhost:3000

# Secret used by NextAuth.js for JWT signing (generate with: openssl rand -base64 32)
# In Docker: auto-generated via NEXTAUTH_SECRET_FILE if not set
#NEXTAUTH_SECRET=

# =============================================================================
# REQUIRED FOR PRODUCTION
# =============================================================================

# Protect first-user signup from unauthorized access (generate with: openssl rand -hex 32)
# CRITICAL: Set this before exposing the app to prevent "first user wins" account takeover
#INITIAL_SIGNUP_TOKEN=

# =============================================================================
# RECOMMENDED FOR PRODUCTION
# =============================================================================

# Restrict API access to specific IP addresses (comma-separated, or * for all)
#ALLOWED_IPS=192.168.1.0/24,10.0.0.0/8

# Rate limit API requests per hour per client
#API_RATE_LIMIT=100

# =============================================================================
# INTEGRATION CREDENTIALS (can be configured via Dashboard UI instead)
# =============================================================================

# Claude/Anthropic API key - get from https://console.anthropic.com/
#ANTHROPIC_API_KEY=

# Authentication mode for Claude CLI subprocess:
# - auto (default): use API key if available, otherwise rely on CLI login
# - cli: never pass API key to subprocess (for Claude subscription accounts)
#CLAUDE_CODE_AUTH_MODE=auto

# GitLab personal access token - create at https://gitlab.com/-/profile/personal_access_tokens
# Required scopes: api, read_repository, write_repository
#GITLAB_TOKEN=

# GitLab instance URL (default: https://gitlab.com)
#GITLAB_URL=https://gitlab.com

# Allowed GitLab hosts for security (comma-separated)
#ALLOWED_GITLAB_HOSTS=gitlab.com

# =============================================================================
# API AUTHENTICATION (optional - UI-managed keys are preferred)
# =============================================================================

# Legacy API keys for external clients (comma-separated)
#VALID_API_KEYS=

# Legacy admin API key with elevated privileges
#ADMIN_API_KEY=

# =============================================================================
# APPLICATION TUNING (optional)
# =============================================================================

# Logging level: debug | info | warn | error
#LOG_LEVEL=info

# Maximum workspace size in MB
#MAX_WORKSPACE_SIZE_MB=500

# Maximum concurrent workspaces
#MAX_CONCURRENT_WORKSPACES=3

# Prefix for temporary workspace directories
#TEMP_DIR_PREFIX=gitlab-claude-

# =============================================================================
# DOCKER/INFRASTRUCTURE (optional)
# =============================================================================

# File path for auto-generated NEXTAUTH_SECRET in Docker
#NEXTAUTH_SECRET_FILE=/secrets/nextauth-secret

# Path to real git binary (used by sandboxed git manager)
#INTERNAL_GIT_PATH=/opt/internal/bin/git

# Path to Claude Code wrapper script
#CLAUDE_CODE_WRAPPER=/usr/local/bin/claude-code-wrapper
